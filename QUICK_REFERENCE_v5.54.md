# v5.54 å¿«é€Ÿå‚è€ƒæŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¼–è¯‘
```bash
cd modern_format_boost
cargo build --release
```

### åŸºç¡€ä½¿ç”¨
```bash
# åˆ†æè§†é¢‘
./vidquality_hevc/target/release/vidquality-hevc analyze video.mp4

# è½¬æ¢è§†é¢‘ï¼ˆè‡ªåŠ¨è´¨é‡åŒ¹é…ï¼‰
./vidquality_hevc/target/release/vidquality-hevc auto video.mp4 -r

# è½¬æ¢è§†é¢‘ï¼ˆç²¾ç¡®è´¨é‡ + å‹ç¼©ï¼‰
./vidquality_hevc/target/release/vidquality-hevc auto video.mp4 -r --explore --match-quality --compress

# è½¬æ¢è§†é¢‘ï¼ˆCPU ç¼–ç ï¼Œæœ€é«˜è´¨é‡ï¼‰
./vidquality_hevc/target/release/vidquality-hevc auto video.mp4 -r --cpu
```

## ğŸ“Š å…³é”®æ”¹è¿›

| æ”¹è¿› | è¯´æ˜ | å½±å“ |
|------|------|------|
| ğŸ”¥ GPU æœç´¢ | ä¸‰é˜¶æ®µæ™ºèƒ½æœç´¢ | ç²¾åº¦ Â±0.5 CRF |
| ğŸ”¥ é‡‡æ ·ä¼˜åŒ– | è‡ªé€‚åº”é‡‡æ ·æ—¶é•¿ | é€Ÿåº¦æå‡ 50% |
| ğŸ”¥ è´¨é‡éªŒè¯ | ä¸‰é‡äº¤å‰éªŒè¯ | ç½®ä¿¡åº¦ 92% |
| ğŸ”¥ è¿›åº¦æ˜¾ç¤º | å›ºå®šåº•éƒ¨è¿›åº¦æ¡ | UX æ”¹è¿› |
| ğŸ”¥ CPU é‡‡æ · | å®Œæ•´æ€§ä¿è¯ | è¾“å‡ºå¯é  |

## ğŸ¯ å¸¸è§åœºæ™¯

### åœºæ™¯ 1: å¿«é€Ÿè½¬æ¢ï¼ˆé»˜è®¤ï¼‰
```bash
./vidquality_hevc/target/release/vidquality-hevc auto video.mp4 -r
```
- è‡ªåŠ¨è´¨é‡åŒ¹é…
- é€Ÿåº¦ä¼˜å…ˆ
- è´¨é‡ä¿è¯ SSIM â‰¥ 0.95

### åœºæ™¯ 2: ç²¾ç¡®è´¨é‡åŒ¹é…
```bash
./vidquality_hevc/target/release/vidquality-hevc auto video.mp4 -r --explore --match-quality
```
- å¯»æ‰¾æœ€é«˜ SSIM
- ä¸å…³å¿ƒæ–‡ä»¶å¤§å°
- è´¨é‡ä¼˜å…ˆ

### åœºæ™¯ 3: ç²¾ç¡®è´¨é‡ + å‹ç¼©
```bash
./vidquality_hevc/target/release/vidquality-hevc auto video.mp4 -r --explore --match-quality --compress
```
- æœ€é«˜ SSIM + è¾“å‡º < è¾“å…¥
- å¹³è¡¡è´¨é‡å’Œå¤§å°
- æ¨èä½¿ç”¨

### åœºæ™¯ 4: æœ€é«˜è´¨é‡ï¼ˆCPUï¼‰
```bash
./vidquality_hevc/target/release/vidquality-hevc auto video.mp4 -r --cpu
```
- å¼ºåˆ¶ CPU ç¼–ç 
- SSIM å¯è¾¾ 0.98+
- é€Ÿåº¦è¾ƒæ…¢

### åœºæ™¯ 5: æ•°å­¦æ— æŸ
```bash
./vidquality_hevc/target/release/vidquality-hevc auto video.mp4 -r --lossless
```
- CRF 0ï¼ˆæ— æŸï¼‰
- æ–‡ä»¶å¾ˆå¤§
- ä»…ç”¨äºå½’æ¡£

## ğŸ”§ CLI å‚æ•°é€ŸæŸ¥

### åŸºç¡€å‚æ•°
```
-o, --output <DIR>     è¾“å‡ºç›®å½•
-f, --force            å¼ºåˆ¶è½¬æ¢
-r, --recursive        é€’å½’å¤„ç†
```

### è½¬æ¢æ¨¡å¼
```
--delete-original      åˆ é™¤åŸæ–‡ä»¶
--in-place             åŸåœ°è½¬æ¢ï¼ˆåˆ é™¤åŸæ–‡ä»¶ï¼‰
--lossless             æ•°å­¦æ— æŸ
```

### è´¨é‡æ§åˆ¶
```
--explore              äºŒåˆ†æœç´¢æœ€ä¼˜ CRF
--match-quality        è´¨é‡åŒ¹é…ï¼ˆé»˜è®¤å¼€å¯ï¼‰
--compress             è¦æ±‚è¾“å‡º < è¾“å…¥
--cpu                  å¼ºåˆ¶ CPU ç¼–ç 
```

### å…¼å®¹æ€§
```
--apple-compat         è½¬æ¢ä¸º Apple å…¼å®¹æ ¼å¼
```

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### ç¼–ç é€Ÿåº¦
- 1 åˆ†é’Ÿè§†é¢‘: 1.5 åˆ†é’Ÿ
- 10 åˆ†é’Ÿè§†é¢‘: 4 åˆ†é’Ÿ
- 60 åˆ†é’Ÿè§†é¢‘: 12 åˆ†é’Ÿ

### è´¨é‡æŒ‡æ ‡
- SSIM: 0.95-0.98
- å‹ç¼©ç‡: 20-40%
- ç²¾åº¦: Â±0.5 CRF

### èµ„æºä½¿ç”¨
- GPU å†…å­˜: 2-4 GB
- CPU å†…å­˜: 1-2 GB
- ç£ç›˜: è¾“å…¥ + 20%

## ğŸ›¡ï¸ é”™è¯¯å¤„ç†

### é”™è¯¯ 1: GPU å†…å­˜ä¸è¶³
```
âŒ GPU memory allocation failed
ğŸ’¡ è§£å†³: ä½¿ç”¨ --cpu æ ‡å¿—
```

### é”™è¯¯ 2: è¾“å‡ºè´¨é‡ä¸è¾¾æ ‡
```
âŒ SSIM validation failed: 0.92 < 0.95
ğŸ’¡ è§£å†³: ä½¿ç”¨ --cpu æ ‡å¿—è·å¾—æ›´é«˜è´¨é‡
```

### é”™è¯¯ 3: è¾“å‡ºæ–‡ä»¶è¿‡å¤§
```
âŒ Compression failed: output > input
ğŸ’¡ è§£å†³: ç§»é™¤ --compress æ ‡å¿—æˆ–ä½¿ç”¨ --explore
```

## ğŸ“Š è¿›åº¦æ˜¾ç¤ºè¯´æ˜

```
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ ğŸ”¬ ç²¾ç¡®è´¨é‡åŒ¹é…+å‹ç¼© (Hevc) â”‚ è¾“å…¥: 2.50 MB â”‚
â”‚ ğŸ¯ ç›®æ ‡: æœ€é«˜ SSIM + è¾“å‡º < è¾“å…¥ â”‚ CRF èŒƒå›´: [18.0, 28.0] â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

**è¯´æ˜**:
- ğŸ”¬ å½“å‰æ¨¡å¼
- ğŸ¯ è½¬æ¢ç›®æ ‡
- è¾“å…¥å¤§å°
- CRF æœç´¢èŒƒå›´

```
â”‚ Stage A â”‚ CRF 18.0 â”‚ +5.2% âŒ â”‚ Iter 1 â”‚ Best: CRF 0.0 â”‚ â±ï¸ 2.3s â”‚
```

**è¯´æ˜**:
- Stage A: æœç´¢é˜¶æ®µ
- CRF 18.0: å½“å‰ CRF å€¼
- +5.2% âŒ: å¤§å°å˜åŒ–ï¼ˆâŒ ä¸ç¬¦åˆç›®æ ‡ï¼‰
- Iter 1: è¿­ä»£æ¬¡æ•°
- Best: CRF 0.0: ç›®å‰æœ€ä½³ CRF
- â±ï¸ 2.3s: è€—æ—¶

```
â”‚ ğŸ“Š ç»“æœ: CRF 22.5 â”‚ SSIM 0.9823 âœ… è‰¯å¥½ â”‚ -15.2% â”‚ èŠ‚çœ 0.38 MB â”‚
```

**è¯´æ˜**:
- ğŸ“Š æœ€ç»ˆç»“æœ
- CRF 22.5: æœ€ä¼˜ CRF å€¼
- SSIM 0.9823 âœ… è‰¯å¥½: è´¨é‡è¯„çº§
- -15.2%: å‹ç¼©ç‡
- èŠ‚çœ 0.38 MB: èŠ‚çœå¤§å°

## ğŸ” è°ƒè¯•æŠ€å·§

### å¯ç”¨è¯¦ç»†æ—¥å¿—
```bash
RUST_LOG=debug ./vidquality_hevc/target/release/vidquality-hevc auto video.mp4
```

### åˆ†æè§†é¢‘ä¿¡æ¯
```bash
./vidquality_hevc/target/release/vidquality-hevc analyze video.mp4 -o json
```

### æµ‹è¯•è½¬æ¢
```bash
# å…ˆåˆ†æ
./vidquality_hevc/target/release/vidquality-hevc analyze video.mp4

# å†è½¬æ¢
./vidquality_hevc/target/release/vidquality-hevc auto video.mp4 --force
```

## ğŸ“š æ–‡æ¡£å¯¼èˆª

| æ–‡æ¡£ | ç”¨é€” |
|------|------|
| README.md | é¡¹ç›®æ¦‚è§ˆ |
| USAGE_GUIDE.md | è¯¦ç»†ä½¿ç”¨æŒ‡å— |
| VERSION_STABLE_v5.54.md | ç‰ˆæœ¬è¯´æ˜ |
| COMPARISON_v5.2_vs_v5.54.md | ç‰ˆæœ¬å¯¹æ¯” |
| QUICK_REFERENCE_v5.54.md | æœ¬æ–‡ä»¶ |

## ğŸ“ å­¦ä¹ è·¯å¾„

### åˆçº§ç”¨æˆ·
1. é˜…è¯» README.md
2. è¿è¡Œ `./vidquality_hevc/target/release/vidquality-hevc analyze video.mp4`
3. è¿è¡Œ `./vidquality_hevc/target/release/vidquality-hevc auto video.mp4 -r`

### ä¸­çº§ç”¨æˆ·
1. é˜…è¯» USAGE_GUIDE.md
2. å°è¯•ä¸åŒçš„ flag ç»„åˆ
3. æŸ¥çœ‹è¿›åº¦æ˜¾ç¤ºå’Œç»“æœ

### é«˜çº§ç”¨æˆ·
1. é˜…è¯» VERSION_STABLE_v5.54.md
2. æŸ¥çœ‹æºä»£ç ï¼ˆshared_utils/src/ï¼‰
3. è‡ªå®šä¹‰å‚æ•°å’Œç®—æ³•

## ğŸ’¡ æœ€ä½³å®è·µ

### âœ… æ¨èåšæ³•
- ä½¿ç”¨ `--explore --match-quality --compress` è·å¾—æœ€ä½³å¹³è¡¡
- ä½¿ç”¨ `--cpu` æ ‡å¿—è·å¾—æœ€é«˜è´¨é‡
- å®šæœŸæ£€æŸ¥è¿›åº¦æ˜¾ç¤º
- ä¿ç•™åŸæ–‡ä»¶ç›´åˆ°éªŒè¯å®Œæˆ

### âŒ é¿å…åšæ³•
- ä¸è¦åŒæ—¶ä½¿ç”¨ `--explore --compress`ï¼ˆå†²çªï¼‰
- ä¸è¦åœ¨ç³»ç»Ÿç›®å½•è¿è¡Œï¼ˆå®‰å…¨æ£€æŸ¥ä¼šé˜»æ­¢ï¼‰
- ä¸è¦å¿½è§†é”™è¯¯ä¿¡æ¯
- ä¸è¦åœ¨ç½‘ç»œé©±åŠ¨å™¨ä¸Šè¿è¡Œï¼ˆæ€§èƒ½å·®ï¼‰

## ğŸ”„ å·¥ä½œæµç¨‹

### æ ‡å‡†å·¥ä½œæµ
```
1. åˆ†æè§†é¢‘
   ./vidquality_hevc/target/release/vidquality-hevc analyze video.mp4

2. è½¬æ¢è§†é¢‘
   ./vidquality_hevc/target/release/vidquality-hevc auto video.mp4 -r --explore --match-quality --compress

3. éªŒè¯ç»“æœ
   æ£€æŸ¥è¿›åº¦æ˜¾ç¤ºå’Œæœ€ç»ˆæŠ¥å‘Š

4. ç¡®è®¤æˆåŠŸ
   æ£€æŸ¥è¾“å‡ºæ–‡ä»¶å¤§å°å’Œè´¨é‡
```

### æ‰¹é‡å¤„ç†å·¥ä½œæµ
```
1. å‡†å¤‡æ–‡ä»¶å¤¹
   mkdir -p /path/to/videos

2. è¿è¡Œè½¬æ¢
   ./vidquality_hevc/target/release/vidquality-hevc auto /path/to/videos -r --explore --match-quality --compress

3. ç›‘æ§è¿›åº¦
   æŸ¥çœ‹å®æ—¶è¿›åº¦æ˜¾ç¤º

4. æ£€æŸ¥ç»“æœ
   æŸ¥çœ‹æœ€ç»ˆç»Ÿè®¡æŠ¥å‘Š
```

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆè½¬æ¢è¿™ä¹ˆæ…¢ï¼Ÿ
A: è¿™æ˜¯æ­£å¸¸çš„ã€‚GPU æœç´¢éœ€è¦å¤šæ¬¡ç¼–ç æµ‹è¯•ã€‚ä½¿ç”¨ `--cpu` æ ‡å¿—ä¼šæ›´æ…¢ä½†è´¨é‡æ›´é«˜ã€‚

### Q: ä¸ºä»€ä¹ˆè¾“å‡ºæ–‡ä»¶æ¯”è¾“å…¥è¿˜å¤§ï¼Ÿ
A: è¿™å¯èƒ½æ˜¯å› ä¸ºè¾“å…¥å·²ç»æ˜¯é«˜åº¦å‹ç¼©çš„æ ¼å¼ã€‚ä½¿ç”¨ `--compress` æ ‡å¿—å¼ºåˆ¶å‹ç¼©ã€‚

### Q: å¦‚ä½•è·å¾—æœ€é«˜è´¨é‡ï¼Ÿ
A: ä½¿ç”¨ `--cpu` æ ‡å¿—ã€‚è¿™ä¼šä½¿ç”¨ libx265 CPU ç¼–ç ï¼Œå¯ä»¥è¾¾åˆ° SSIM 0.98+ã€‚

### Q: å¯ä»¥ä¸­æ–­è½¬æ¢å—ï¼Ÿ
A: å¯ä»¥æŒ‰ Ctrl+C ä¸­æ–­ã€‚å·²å®Œæˆçš„æ–‡ä»¶ä¼šè¢«ä¿ç•™ã€‚

### Q: å¦‚ä½•æ¢å¤åŸæ–‡ä»¶ï¼Ÿ
A: ä¸è¦ä½¿ç”¨ `--delete-original` æˆ– `--in-place` æ ‡å¿—ã€‚åŸæ–‡ä»¶ä¼šè¢«ä¿ç•™ã€‚

## ğŸ“ è·å–å¸®åŠ©

1. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—: `RUST_LOG=debug`
2. æŸ¥çœ‹æ–‡æ¡£: README.md, USAGE_GUIDE.md
3. åˆ†æè§†é¢‘: `analyze` å‘½ä»¤
4. æŸ¥çœ‹æºä»£ç : shared_utils/src/

---

**æœ€åæ›´æ–°**: 2025-12-14
**ç‰ˆæœ¬**: v5.54
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª
